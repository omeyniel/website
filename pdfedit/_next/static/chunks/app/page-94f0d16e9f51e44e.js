(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2920:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var r=s(5155),a=s(2115);class l{async load(){let e=await Promise.all([s.e(84),s.e(376)]).then(s.bind(s,8045));e.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(e.version,"/pdf.worker.min.js");let t=await this.file.arrayBuffer();this.pdfDoc=await e.getDocument({data:t}).promise,this.pageCount=this.pdfDoc.numPages}getPageCount(){return this.pageCount}getFileName(){return this.file.name}getFile(){return this.file}getPdfDoc(){return this.pdfDoc}async renderPage(e,t){if(!this.pdfDoc)throw Error("PDF not loaded");let s=await this.pdfDoc.getPage(e),r=s.getViewport({scale:1.5}),a=t.getContext("2d");if(!a)throw Error("Canvas context not available");t.height=r.height,t.width=r.width,await s.render({canvasContext:a,viewport:r}).promise}constructor(e){this.pdfDoc=null,this.pageCount=0,this.file=e}}var n=s(3394);class i{static async splitPDF(e,t){let s=await e.arrayBuffer(),r=await n.PDFDocument.load(s),a=await n.PDFDocument.create();for(let e of t){let[t]=await a.copyPages(r,[e-1]);a.addPage(t)}let l=await a.save(),i=l instanceof Uint8Array?l:new Uint8Array(l);return new Blob([new Uint8Array(i)],{type:"application/pdf"})}static async mergePDFs(e){let t=await n.PDFDocument.create();for(let s of e){let e=await s.arrayBuffer(),r=await n.PDFDocument.load(e);(await t.copyPages(r,r.getPageIndices())).forEach(e=>t.addPage(e))}let s=await t.save(),r=s instanceof Uint8Array?s:new Uint8Array(s);return new Blob([new Uint8Array(r)],{type:"application/pdf"})}static downloadBlob(e,t){let s=URL.createObjectURL(e),r=document.createElement("a");r.href=s,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)}}class c{async addDocument(e){let t=new l(e);return await t.load(),this.documents.push(t),t}getDocuments(){return this.documents}removeDocument(e){this.documents.splice(e,1),this.clearSelectedPages()}clearDocuments(){this.documents=[],this.clearSelectedPages()}togglePageSelection(e,t){let s="".concat(e,"-").concat(t);this.selectedPages.has(s)?this.selectedPages.delete(s):this.selectedPages.add(s)}isPageSelected(e,t){return this.selectedPages.has("".concat(e,"-").concat(t))}getSelectedPages(){return this.selectedPages}clearSelectedPages(){this.selectedPages.clear()}async splitDocument(e,t){let s=this.documents[e];if(!s)throw Error("Document not found");let r=await i.splitPDF(s.getFile(),t),a="".concat(s.getFileName().replace(".pdf",""),"_split.pdf");i.downloadBlob(r,a)}async mergeDocuments(){if(this.documents.length<2)throw Error("Need at least 2 documents to merge");let e=this.documents.map(e=>e.getFile()),t=await i.mergePDFs(e);i.downloadBlob(t,"merged.pdf")}constructor(){this.documents=[],this.selectedPages=new Set}}var o=s(1786);function d(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}let u=(0,a.forwardRef)((e,t)=>{let{className:s,variant:a="default",size:l="md",...n}=e;return(0,r.jsx)("button",{ref:t,className:d("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:opacity-50 disabled:pointer-events-none",{default:"bg-primary text-primary-foreground hover:bg-primary/90",outline:"border border-border bg-transparent hover:bg-muted",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"bg-transparent hover:bg-muted"}[a],{sm:"h-8 px-3",md:"h-10 px-4"}[l],s),...n})});function m(e){let{className:t,...s}=e;return(0,r.jsx)("div",{className:d("rounded-lg border border-border bg-card text-card-foreground",t),...s})}function h(e){let{onFilesSelected:t,multiple:s=!1}=e,l=(0,a.useRef)(null);return(0,r.jsx)(m,{className:"border-2 border-dashed border-border hover:border-primary transition-colors cursor-pointer",onDrop:e=>{e.preventDefault();let s=Array.from(e.dataTransfer.files).filter(e=>"application/pdf"===e.type);s.length>0&&t(s)},onDragOver:e=>{e.preventDefault()},onClick:()=>{var e;return null==(e=l.current)?void 0:e.click()},children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 gap-4",children:[(0,r.jsx)("div",{className:"rounded-full bg-primary/10 p-4",children:(0,r.jsx)(o.A,{className:"w-8 h-8 text-primary"})}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-lg font-medium text-foreground",children:"Drop PDF files here or click to browse"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:s?"Select multiple PDFs to merge":"Select a PDF to split"})]}),(0,r.jsx)(u,{variant:"secondary",type:"button",children:"Choose Files"}),(0,r.jsx)("input",{ref:l,type:"file",accept:"application/pdf",multiple:s,onChange:e=>{let s=Array.from(e.target.files||[]);s.length>0&&t(s),l.current&&(l.current.value="")},className:"hidden"})]})})}function g(e){let{className:t,checked:s,onCheckedChange:a,...l}=e;return(0,r.jsx)("input",{type:"checkbox",checked:s,onChange:e=>null==a?void 0:a(e.target.checked),className:d("h-4 w-4 rounded border border-border text-primary focus-visible:ring-2 focus-visible:ring-ring",t),...l})}function f(e){let{document:t,docIndex:s,onPageToggle:l,isPageSelected:n,showSelection:i=!1}=e,[c,o]=(0,a.useState)([]),u=(0,a.useRef)(new Map);return(0,a.useEffect)(()=>{o(Array.from({length:t.getPageCount()},(e,t)=>t+1))},[t]),(0,a.useEffect)(()=>{c.forEach(async e=>{let s=u.current.get(e);if(s)try{await t.renderPage(e,s)}catch(t){console.error("Error rendering page ".concat(e,":"),t)}})},[c,t]),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:t.getFileName()}),(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:[c.length," ",1===c.length?"page":"pages"]})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:c.map(e=>{let t=(null==n?void 0:n(s,e))||!1;return(0,r.jsx)(m,{className:d("relative overflow-hidden transition-all cursor-pointer hover:shadow-lg",t&&"ring-2 ring-primary"),onClick:()=>i&&(null==l?void 0:l(s,e)),children:(0,r.jsxs)("div",{className:"p-2",children:[i&&(0,r.jsx)("div",{className:"absolute top-3 left-3 z-10",children:(0,r.jsx)(g,{checked:t,onCheckedChange:()=>null==l?void 0:l(s,e),className:"bg-background"})}),(0,r.jsx)("canvas",{ref:t=>{t&&u.current.set(e,t)},className:"w-full h-auto"}),(0,r.jsxs)("p",{className:"text-center text-sm text-muted-foreground mt-2",children:["Page ",e]})]})},e)})})]})}u.displayName="Button";var p=s(1360),x=s(2024);function v(){return{toast:e=>{}}}function j(e){let{controller:t}=e,[s,l]=(0,a.useState)(null),[,n]=(0,a.useState)({}),{toast:i}=v(),c=async e=>{try{let s=await t.addDocument(e[0]);l(s),t.clearSelectedPages(),n({})}catch(e){i({title:"Error",description:"Failed to load PDF file",variant:"destructive"})}},o=async()=>{if(!s)return;let e=Array.from(t.getSelectedPages()).filter(e=>e.startsWith("0-")).map(e=>Number.parseInt(e.split("-")[1]));if(0===e.length)return void i({title:"No pages selected",description:"Please select at least one page to extract",variant:"destructive"});try{await t.splitDocument(0,e.sort((e,t)=>e-t)),i({title:"Success",description:"Extracted ".concat(e.length," page(s)")})}catch(e){i({title:"Error",description:"Failed to split PDF",variant:"destructive"})}};return(0,r.jsx)("div",{className:"space-y-6",children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Select Pages to Extract"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(u,{variant:"outline",onClick:()=>{t.clearDocuments(),l(null),n({})},children:[(0,r.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Clear"]}),(0,r.jsxs)(u,{onClick:o,children:[(0,r.jsx)(x.A,{className:"w-4 h-4 mr-2"}),"Extract Selected Pages"]})]})]}),(0,r.jsx)(f,{document:s,docIndex:0,onPageToggle:(e,s)=>{t.togglePageSelection(e,s),n({})},isPageSelected:(e,s)=>t.isPageSelected(e,s),showSelection:!0})]}):(0,r.jsx)(h,{onFilesSelected:c,multiple:!1})})}var b=s(9124),y=s(5229);function w(e){let{controller:t}=e,[s,l]=(0,a.useState)([]),[,n]=(0,a.useState)({}),{toast:i}=v(),c=async e=>{try{for(let s of e)await t.addDocument(s);l(t.getDocuments()),n({})}catch(e){i({title:"Error",description:"Failed to load PDF files",variant:"destructive"})}},o=async()=>{if(s.length<2)return void i({title:"Not enough files",description:"Please add at least 2 PDF files to merge",variant:"destructive"});try{await t.mergeDocuments(),i({title:"Success",description:"Merged ".concat(s.length," PDF files")})}catch(e){i({title:"Error",description:"Failed to merge PDFs",variant:"destructive"})}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(h,{onFilesSelected:c,multiple:!0}),s.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-foreground",children:[s.length," PDF",1!==s.length?"s":""," Ready to Merge"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(u,{variant:"outline",onClick:()=>{t.clearDocuments(),l([]),n({})},children:[(0,r.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Clear All"]}),(0,r.jsxs)(u,{onClick:o,disabled:s.length<2,children:[(0,r.jsx)(b.A,{className:"w-4 h-4 mr-2"}),"Merge PDFs"]})]})]}),(0,r.jsx)("div",{className:"space-y-6",children:s.map((e,s)=>(0,r.jsxs)(m,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-foreground",children:[s+1,". ",e.getFileName()]}),(0,r.jsx)(u,{variant:"ghost",size:"sm",onClick:()=>{t.removeDocument(s),l(t.getDocuments()),n({})},children:(0,r.jsx)(y.A,{className:"w-4 h-4"})})]}),(0,r.jsx)(f,{document:e,docIndex:s,showSelection:!1})]},s))})]})]})}function N(){return null}let P=new c;function D(){let[e,t]=(0,a.useState)("split"),s=e=>{P.clearDocuments(),t(e)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("header",{className:"site-header",children:[(0,r.jsx)("div",{className:"container header-row",children:(0,r.jsxs)("div",{className:"brand",children:[(0,r.jsx)("img",{src:"/assets/logo.jpg",alt:"meyniel.ca",className:"logo",onError:e=>e.currentTarget.style.display="none"}),(0,r.jsxs)("div",{className:"brand-text",children:[(0,r.jsx)("h1",{children:"PDF Editor"}),(0,r.jsx)("p",{className:"subtitle",children:"Split PDFs by extracting pages or merge multiple PDFs into one"})]})]})}),(0,r.jsxs)("nav",{className:"container nav",children:[(0,r.jsx)("a",{href:"/index.html",children:"Accueil"}),(0,r.jsx)("a",{href:"/tetris/",className:"tool-link",children:"\uD83C\uDFAE Tetris"}),(0,r.jsx)("a",{href:"/pdfedit/",children:"\xc9diteur PDF"})]})]}),(0,r.jsxs)("main",{className:"min-h-screen bg-background",children:[(0,r.jsxs)("div",{className:"container",children:[(0,r.jsx)("div",{className:"pdfedit-divider"}),(0,r.jsxs)("div",{className:"flex gap-2 mb-8",children:[(0,r.jsxs)(u,{variant:"split"===e?"default":"outline",onClick:()=>s("split"),className:"flex-1 sm:flex-none",children:[(0,r.jsx)(x.A,{className:"w-4 h-4 mr-2"}),"Split PDF"]}),(0,r.jsxs)(u,{variant:"merge"===e?"default":"outline",onClick:()=>s("merge"),className:"flex-1 sm:flex-none",children:[(0,r.jsx)(b.A,{className:"w-4 h-4 mr-2"}),"Merge PDFs"]})]}),"split"===e?(0,r.jsx)(j,{controller:P}):(0,r.jsx)(w,{controller:P})]}),(0,r.jsx)(N,{})]})]})}},5786:(e,t,s)=>{Promise.resolve().then(s.bind(s,2920))}},e=>{e.O(0,[880,441,255,358],()=>e(e.s=5786)),_N_E=e.O()}]);